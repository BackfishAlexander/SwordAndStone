{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let HomeComponent = class HomeComponent {\n  fetchCampaigns() {\n    this.http.get(`http://` + this.auth.getBackendIP() + `:8080/private/campaign/list`, {\n      headers: this.auth.getHeaders()\n    }).subscribe(response => {\n      this.campaigns = Object.entries(response).map(([id, {\n        name,\n        description\n      }]) => ({\n        id,\n        name,\n        description\n      }));\n    }, error => {\n      console.error('Failed to fetch campaigns', error);\n      if (error.status == 403) {\n        this.auth.logout();\n      } else {\n        this.notificationService.show('Failed to load home page', 'error');\n      }\n    });\n  }\n  goToCampaign(campaignId) {\n    this.router.navigate(['/campaign', campaignId]);\n  }\n  deleteCampaign(campaignId) {\n    this.auth.deleteRequest(\"/private/campaign/delete/\" + campaignId).then(success => {\n      if (success) {\n        console.log('Campaign deleted successfully');\n        this.fetchCampaigns();\n      } else {\n        console.log('Delete failed');\n        // Handle login failure\n      }\n    }).catch(error => {\n      console.error('An error occurred during login', error);\n      // Handle the error\n    });\n  }\n\n  openModal() {\n    this.showModal = true;\n  }\n  closeModal() {\n    console.log(\"CLOSING THE MODAL!!!!\");\n    this.showModal = false;\n  }\n  submitCampaign() {\n    // Implement submission logic here\n    console.log('Campaign Submitted:', this.campaign);\n    this.http.post('http://' + this.auth.getBackendIP() + ':8080/private/campaign/add', this.campaign, {\n      headers: this.auth.getHeaders(),\n      responseType: 'text'\n    }).subscribe(response => {\n      this.fetchCampaigns();\n    }, error => {\n      if (error.status == 403) {\n        this.auth.logout();\n      }\n    });\n    this.closeModal();\n  }\n  constructor(cookieService, router, http, auth, notificationService) {\n    this.cookieService = cookieService;\n    this.router = router;\n    this.http = http;\n    this.auth = auth;\n    this.notificationService = notificationService;\n    this.username = \"\";\n    this.userId = \"\";\n    this.campaigns = [];\n    this.showModal = false;\n    this.campaign = {\n      campaignName: '',\n      campaignDescription: '',\n      username: '',\n      id: ''\n    };\n  }\n  ngOnInit() {\n    this.username = this.auth.getUsername();\n    if (!this.auth.isLoggedIn()) {\n      this.router.navigate(['/login']);\n    }\n    this.fetchCampaigns();\n  }\n};\nHomeComponent = __decorate([Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css']\n})], HomeComponent);","map":{"version":3,"names":["Component","HomeComponent","fetchCampaigns","http","get","auth","getBackendIP","headers","getHeaders","subscribe","response","campaigns","Object","entries","map","id","name","description","error","console","status","logout","notificationService","show","goToCampaign","campaignId","router","navigate","deleteCampaign","deleteRequest","then","success","log","catch","openModal","showModal","closeModal","submitCampaign","campaign","post","responseType","constructor","cookieService","username","userId","campaignName","campaignDescription","ngOnInit","getUsername","isLoggedIn","__decorate","selector","templateUrl","styleUrls"],"sources":["/Users/alex/Documents/Programs/SwordInStone/Frontend/src/app/home/home.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { CookieService } from 'ngx-cookie-service';  // Assuming you're using ngx-cookie-service to handle cookies\nimport { Router } from '@angular/router';\nimport { HttpClient } from '@angular/common/http';\nimport { AuthenticationService } from '../services/authentication.service';\nimport { NotificationService } from '../notification.service';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css']\n})\n\nexport class HomeComponent implements OnInit {\n  username: string | null = \"\";\n  userId: string | null = \"\";\n  campaigns: {name: string, description: string, id: string}[] = [];\n\n  showModal: boolean = false;\n  campaign = {\n    campaignName: '',\n    campaignDescription: '',\n    username: '',\n    id: ''\n  };\n\n  fetchCampaigns() {\n    this.http.get<{ [key: string]: { name: string; description: string; } }>(`http://` + this.auth.getBackendIP() + `:8080/private/campaign/list`, { headers: this.auth.getHeaders() })\n      .subscribe(response => {\n        this.campaigns = Object.entries(response).map(([id, { name, description }]) => ({\n          id,\n          name,\n          description\n        }));\n      }, error => {\n        console.error('Failed to fetch campaigns', error);\n        if (error.status == 403) {\n          this.auth.logout();\n        }\n        else {\n          this.notificationService.show('Failed to load home page', 'error');\n        }\n      });\n  }\n\n  goToCampaign(campaignId: string) {\n    this.router.navigate(['/campaign', campaignId]);\n  }\n\n  deleteCampaign(campaignId: String) {\n    this.auth.deleteRequest(\"/private/campaign/delete/\" + campaignId).then(success => {\n      if (success) {\n        console.log('Campaign deleted successfully');\n        this.fetchCampaigns();\n      } else {\n        console.log('Delete failed');\n        // Handle login failure\n      }\n    }).catch(error => {\n      console.error('An error occurred during login', error);\n      // Handle the error\n    });\n  }\n\n  openModal() {\n    this.showModal = true;\n  }\n\n  closeModal() {\n    console.log(\"CLOSING THE MODAL!!!!\");\n    this.showModal = false;\n  }\n\n  submitCampaign() {\n    // Implement submission logic here\n    console.log('Campaign Submitted:', this.campaign);\n    this.http.post('http://' + this.auth.getBackendIP() + ':8080/private/campaign/add', this.campaign, { headers: this.auth.getHeaders(), responseType: 'text' })\n      .subscribe(response => {\n        this.fetchCampaigns();\n      }, error => {\n        if (error.status == 403) {\n          this.auth.logout();\n        }\n      });\n    this.closeModal();\n  }\n  \n  constructor(private cookieService: CookieService, \n    private router: Router, \n    private http: HttpClient,\n     private auth: AuthenticationService,\n     private notificationService: NotificationService) {\n  }\n\n  \n\n  ngOnInit() {\n    this.username = this.auth.getUsername();\n\n    if (!this.auth.isLoggedIn()) {\n      this.router.navigate(['/login']);\n    }\n\n    this.fetchCampaigns();\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}